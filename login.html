<html>
<body>

<table>

<tbody>

<tr>

<td valign="top" width="300"  style="font-family:monospace">
<h2>Руководство по IRAF</h2>
&#9675; <a href="index.html">Установка IRAF под Linux</a><br>
&#9679; Настройка IRAF (login.cl)<br>
&#9675; <a href="cl.html">Командная строка IRAF</a><br>
&#9675; <a href="file.html">Работа с файлами в IRAF</a><br>
&#9675; <a href="package.html">Работа с пакетами IRAF</a><br>
&#9675; <a href="task.html">Работа с командами IRAF</a><br>
&#9675; <a href="reduction.html">Первичная обработка снимков</a><br>
&#9675; <a href="align.html">Выравнивание снимков</a><br>
&#9675; <a href="apphot.html">Апертурная фотометрия</a><br>
&#9675; <a href="psfphot.html">PSF-фотометрия</a><br>
&#9675; <a href="script.html">Работа со скриптами в IRAF</a><br>
&#9675; <a href="example.html">Примеры задач</a><br>
&#9675; <a href="reference.html">Справочник команд IRAF</a><br>
&#9675; <a href="envvar.html">Переменные среды IRAF</a>
</td>

<td style="font-family:monospace">

<h3>Настройка IRAF (login.cl)</h3>

<p>Перед началом работы с IRAF следует произвести некоторые настройки файла login.cl, который считывается при каждом запуске IRAF.

<p>Файл login.cl находится в той директории, в которой при установке IRAF была выполнена команда mkiraf. Для данного руководства это директория ~/IRAF (символ ~ для краткости обозначает домашнюю директорию пользователя "/home/имя-пользователя"). Откройте файл login.cl в удобном для Вас текстовом ASCII-редакторе, например, в gedit (обязательно с правом на запись, например, запустив его из терминала командой sudo gedit).

<p>Символ # (решётка) в начале строки означает, что всё написанное после него в этой строке рассматривается как комментарий и не будет использовано при запуске IRAF. Сразу после установки IRAF многие важные для работы строки предварены символом решётки, чтобы пользователь мог сам прописать нужные ему значения параметров и уже затем удалить символ решётки. В зависимости от задач работы в IRAF могут понадобиться разные параметры в login.cl, ниже приведены основные примеры. Не забудьте после внесения изменений в login.cl сохранить файл. Если IRAF уже был запущен на момент изменений в login.cl, то потребуется перезапустить его, чтобы изменения стали активны.

<hr>

<h4>Установка размера снимка</h4>

<p>Найдите строку:

<p style="background-color:lightgray">#set stdimage		= imt800

<p>Здесь комадной set задаётся переменная среды IRAF - stdimage - и её значение - imt800, которое указывает размер буфера стандартного используемого снимка в пикселях, то есть 800 px по умолчанию. Во-первых, нужно убрать символ решётки, чтобы вообще инициализировать эту переменную. Во-вторых, скорее всего снимки, с которыми Вы будете работать, имеют иной размер, поэтому измените эту строку, указав нужный размер снимка; например, если размер Вашего снимка 3056 px (бóльшая сторона):

<p style="background-color:lightgray">set stdimage		= imt3056

<p>Примечание: По умолчанию в IRAF у переменной stdimage есть набор задекларированных значений для некоторых форматов буфера, поэтому просто исправить imt800 на imt3056 в данном случае не достаточно, потому что imt3056 не входит в этот набор, и, например, при попытке открыть снимок командой display будет появляться ошибка:

<p style="background-color:lightgray">ERROR: No entry in device capabilities file for device (imt3056)

<p>Для устранения этой ошибки нужно задекларировать новое, пользовательское значение переменной stdimage в файлах imtoolrc и graphcap - оба находятся в директории /iraf/iraf/dev; редактировать их нужно опять же с администраторским правом на запись как в случае с файлом login.cl.

<p>В файле imtoolrc, в самом конце целиком заменить строку # (add here), при этом пользовательские конфигурации для переменной stdimage нумеруются, начиная с номера 64:

<pre><p style="background-color:lightgray">64  1 3056 3056		# imt64|imt3056</pre>

<p>В файле graphcap, в конце секции # NOAO specific display frame buffer formats после декларации imt57 добавить (здесь, в поле cn задаётся номер конфигурации, тот же, что и в файле imtoolrc, а в полях xr, yr и DD - размеры снимка):

<pre><p style="background-color:lightgray">imt64|imt3056|:cn#64:xr#3056:yr#3056:\<br>
	:LC:BS@:z0#1:zr#200:DD=node!imtool,,3056,3056:tc=iism70:</p></pre>

<h4>Установка типа расширения рабочих файлов</h4>

<p>Найдите строку:

<p style="background-color:lightgray">#set imtype		= "imh"

<p>Здесь командой set задаётся переменная imtype, значение которой указывает тип расширения файлов снимков. В астрономии мы чаще всего имеем дело с FITS-файлами, поэтому замените эту строку, убрав символ решётки и указав разные встречающиеся варианты написания расширения FITS-файлов:

<p style="background-color:lightgray">set imtype		= "imh fit fits fts"

<h4>Отключение автоматической проверки наличия новой версии IRAF</h4>

<p>Найдите строку:

<p style="background-color:lightgray">chkupdate

<p>Это команда IRAF, которая при запуске IRAF проверяет, не появилась ли новая версия IRAF. В этот момент устанавливается связь с сервером NOAO, чтобы сравнить версию IRAF у пользователя с новейшей версией на сервере NOAO. Иногда это может вызвать большую задержку в запуске IRAF, поэтому, чтобы не происходила эта принудительная проверка и IRAF запускался тут же, достаточно в начале строки прописать символ решётки:

<p style="background-color:lightgray">#chkupdate

<p>Если Вы потом всё же захотите-таки проверить наличие новой версии IRAF, то это можно всегда сделать непосредственно в командной строке IRAF этой же самой командой chkupdate.

<hr>

<p>Последнее изменение: 24.10.2017

</td>

</tr>

</tbody>

</table>

</body>
<html>
